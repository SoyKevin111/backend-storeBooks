import{a as l,b as E,c as d,f as F,g as N}from"./chunk-HRF36MJC.js";import{a as A}from"./chunk-BJIYRU5B.js";import{a as r,b as s,g as $,h as R,j as p,k as C}from"./chunk-2T54QLAV.js";import{Q as n,S as w,W as u,aa as k,l as c,p as y,y as m}from"./chunk-UTOI2SA5.js";import{a as i,b as a}from"./chunk-FDERIQAA.js";var j=r("[book] load books"),B=r("[book] load books success",s()),f=r("[book] load books failure",s()),T=r("[book] create book",s()),h=r("[book] create book success",s()),W=r("[book] create book failure",s()),L=r("[book] edit book",s()),x=r("[book] edit book success",s()),_=r("[book] edit book failure",s()),O=r("[book] delete book",s()),S=r("[book] delete book success",s()),P=r("[book] delete book failure",s()),U=r("[book] buy book",s());var q=R("books"),K=$(q,t=>t.books);var H=[],M={books:H},Z=C(M,p(B,(t,{items:o})=>a(i({},t),{books:o})),p(h,(t,{newItem:o})=>a(i({},t),{books:[...t.books,o]})),p(x,(t,{editedItem:o})=>a(i({},t),{books:t.books.map(e=>e.id===o.id?o:e)})),p(S,(t,{id:o})=>a(i({},t),{books:t.books.filter(e=>e.id!==o)})),p(U,(t,{id:o,quantity:e})=>a(i({},t),{books:t.books.map(b=>b.id===o?a(i({},b),{stock:Math.max(b.stock-e,0)}):b)})));var I=class{id=0;name="";phone="";website="";email="";state=""};var v=class{id=0;isbn="";title="";description="";editorial=new I;dateCreated="";price=0;stock=0;category="";bestSeller=!1;authors=[]};var g=class t{API_URL="http://localhost:8080/storebooks/books";http=k(A);constructor(){}findAll(){return this.http.get(this.API_URL).pipe(w(o=>console.log(o)))}create(o){return this.http.post(this.API_URL,o)}update(o,e){return this.http.put(`${this.API_URL}/${e}`,o)}delete(o){return this.http.delete(`${this.API_URL}/${o}`)}mappingBook(o){let e=new v;return e.isbn="123-232-4545-22",e.title=o.title,e.description=o.description,e.editorial={id:1,name:"Addison-Wesley",phone:"1234567890",website:"https://www.awl.com",email:"contact@awl.com",state:"ACTIVE"},e.dateCreated=o.dateCreated,e.price=o.price,e.stock=o.stock,e.category=o.category,e.bestSeller=o.bestSeller,e.authors=[{id:1,name:"Erich",lastName:"Gamma",identityNumber:"1234567890",email:"egamma@example.com",state:"ACTIVE"},{id:2,name:"Richard",lastName:"Helm",identityNumber:"2345678901",email:"rhelm@example.com",state:"INACTIVE"},{id:3,name:"Ralph",lastName:"Johnson",identityNumber:"3456789012",email:"rjohnson@example.com",state:"ACTIVE"}],e}static \u0275fac=function(e){return new(e||t)};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})};var V=class t{actions$=k(E);booksService=k(g);loadBooks$=l(()=>this.actions$.pipe(d(j),n(()=>this.booksService.findAll().pipe(y(o=>B({items:o})),m(o=>c(f({error:o})))))));createBook$=l(()=>this.actions$.pipe(d(T),n(({newItem:o})=>this.booksService.create(o).pipe(n(e=>c(h({newItem:e}),F())),m(e=>c(f({error:e})))))));updateBook$=l(()=>this.actions$.pipe(d(L),n(({editedItem:o})=>this.booksService.update(o,o.id).pipe(n(e=>c(x({editedItem:e}),N())),m(e=>c(f({error:e})))))));deleteBook$=l(()=>this.actions$.pipe(d(O),n(({id:o})=>this.booksService.delete(o).pipe(y(()=>S({id:o})),m(e=>c(P({error:e})))))));static \u0275fac=function(e){return new(e||t)};static \u0275prov=u({token:t,factory:t.\u0275fac})};export{j as a,T as b,L as c,O as d,K as e,Z as f,V as g};
