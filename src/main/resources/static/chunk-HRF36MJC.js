import{a as B}from"./chunk-BJIYRU5B.js";import{a as h,b as z,c as K,d as L,e as Y,f as F}from"./chunk-2T54QLAV.js";import{$ as E,Aa as G,B as D,C as N,E as $,G as U,J as j,M as k,Q as l,S as P,W as y,Z as a,aa as f,c as x,ea as H,f as w,ja as V,l as m,p as d,r as M,w as O,x as T,y as p}from"./chunk-UTOI2SA5.js";import{a as S}from"./chunk-FDERIQAA.js";var ne={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},b="__@ngrx/effects_create__";function g(e,n={}){let t=n.functional?e:e(),r=S(S({},ne),n);return Object.defineProperty(t,b,{value:r}),t}function oe(e){return Object.getOwnPropertyNames(e).filter(r=>e[r]&&e[r].hasOwnProperty(b)?e[r][b].hasOwnProperty("dispatch"):!1).map(r=>{let i=e[r][b];return S({propertyName:r},i)})}function se(e){return oe(e)}function J(e){return Object.getPrototypeOf(e)}function ie(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function W(e){return typeof e=="function"}function ce(e){return e.filter(W)}function fe(e,n,t){let r=J(e),s=!!r&&r.constructor.name!=="Object"?r.constructor.name:null,u=se(e).map(({propertyName:o,dispatch:c,useEffectsErrorHandler:te})=>{let _=typeof e[o]=="function"?e[o]():e[o],A=te?t(_,n):_;return c===!1?A.pipe(N()):A.pipe(k()).pipe(d(re=>({effect:e[o],notification:re,propertyName:o,sourceName:s,sourceInstance:e})))});return O(...u)}var ue=10;function X(e,n,t=ue){return e.pipe(p(r=>(n&&n.handleError(r),t<=1?e:X(e,n,t-1))))}var Ke=(()=>{class e extends x{constructor(t){super(),t&&(this.source=t)}lift(t){let r=new e;return r.source=this,r.operator=t,r}static{this.\u0275fac=function(r){return new(r||e)(E(Y))}}static{this.\u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function v(...e){return T(n=>e.some(t=>typeof t=="string"?t===n.type:t.type===n.type))}var Le=new a("@ngrx/effects Internal Root Guard"),Ye=new a("@ngrx/effects User Provided Effects"),Je=new a("@ngrx/effects Internal Root Effects"),We=new a("@ngrx/effects Internal Root Effects Instances"),Xe=new a("@ngrx/effects Internal Feature Effects"),Ze=new a("@ngrx/effects Internal Feature Effects Instance Groups"),ae=new a("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>X}),de="@ngrx/effects/init",le=h(de);function pe(e,n){if(e.notification.kind==="N"){let t=e.notification.value;!Ee(t)&&n.handleError(new Error(`Effect ${he(e)} dispatched an invalid action: ${me(t)}`))}}function Ee(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function he({propertyName:e,sourceInstance:n,sourceName:t}){let r=typeof n[e]=="function";return!!t?`"${t}.${String(e)}${r?"()":""}"`:`"${String(e)}()"`}function me(e){try{return JSON.stringify(e)}catch{return e}}var ge="ngrxOnIdentifyEffects";function ve(e){return C(e,ge)}var Se="ngrxOnRunEffects";function Te(e){return C(e,Se)}var ye="ngrxOnInitEffects";function Fe(e){return C(e,ye)}function C(e,n){return e&&n in e&&typeof e[n]=="function"}var Z=(()=>{class e extends w{constructor(t,r){super(),this.errorHandler=t,this.effectsErrorHandler=r}addEffects(t){this.next(t)}toActions(){return this.pipe(j(t=>ie(t)?J(t):t),M(t=>t.pipe(j(be))),M(t=>{let r=t.pipe(U(s=>Ie(this.errorHandler,this.effectsErrorHandler)(s)),d(s=>(pe(s,this.errorHandler),s.notification)),T(s=>s.kind==="N"&&s.value!=null),$()),i=t.pipe(D(1),T(Fe),d(s=>s.ngrxOnInitEffects()));return O(r,i)}))}static{this.\u0275fac=function(r){return new(r||e)(E(G),E(ae))}}static{this.\u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function be(e){return ve(e)?e.ngrxOnIdentifyEffects():""}function Ie(e,n){return t=>{let r=fe(t,e,n);return Te(t)?t.ngrxOnRunEffects(r):r}}var Re=(()=>{class e{get isStarted(){return!!this.effectsSubscription}constructor(t,r){this.effectSources=t,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(r){return new(r||e)(E(Z),E(F))}}static{this.\u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function qe(...e){let n=e.flat(),t=ce(n);return V([t,{provide:H,multi:!0,useValue:()=>{f(K),f(L,{optional:!0});let r=f(Re),i=f(Z),s=!r.isStarted;s&&r.start();for(let u of n){let o=W(u)?f(u):u;i.addEffects(o)}s&&f(F).dispatch(le())}}])}var q=class{constructor(n){this.baseUrl=n}http=f(B);findAll(){return this.http.get(this.baseUrl).pipe(P(n=>console.log(n)))}create(n){return this.http.post(this.baseUrl,n)}update(n,t){return console.log(t),this.http.put(`${this.baseUrl}/${t}`,n)}delete(n){return this.http.delete(`${this.baseUrl}/${n}`)}};var Q=h("[shared] create success"),ee=h("[shared] edit success"),I=h("[shared] catch error",z());function R(e,n){let t=e?.error?.error||"UNKNOWN_ERROR",r=e?.error?.message||"An unknown error occurred.";return console.log(`${t}: ${r}`),m(n({error:{type:t,message:r}}))}function ht(e,n,t){let r=g(()=>e.pipe(v(t.load),l(()=>n.findAll().pipe(d(o=>t.loadSucess({items:o})))))),i=g(()=>e.pipe(v(t.create),l(({newItem:o})=>n.create(o).pipe(l(c=>m(t.createSuccess({newItem:c}),Q())),p(c=>R(c,I)))))),s=g(()=>e.pipe(v(t.edit),l(({editedItem:o})=>n.update(o,o.id).pipe(l(c=>m(t.editSuccess({editedItem:c}),ee())),p(c=>R(c,I)))))),u=g(()=>e.pipe(v(t.delete),l(({id:o})=>n.delete(o).pipe(d(()=>t.deleteSuccess({id:o})))),p(o=>R(o,I))));return{load$:r,create$:i,edit$:s,delete$:u}}export{g as a,Ke as b,v as c,qe as d,q as e,Q as f,ee as g,I as h,R as i,ht as j};
