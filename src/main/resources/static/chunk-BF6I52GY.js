import{a as ee}from"./chunk-YERVY55Z.js";import{a as Q,c as X,e as Y,g as Z}from"./chunk-NMZI5THH.js";import{a as J}from"./chunk-46J4RIDY.js";import{a as S,b as K}from"./chunk-O22OUVCV.js";import"./chunk-YGPISVLE.js";import{b as R,c as u,d as j,e as z,h as B,i as G,j as L,k as W,o as U,q as H}from"./chunk-OFSUVZPS.js";import{a as P}from"./chunk-S4B3EVCZ.js";import{f as C}from"./chunk-2T54QLAV.js";import{Ja as a,Ua as s,Xa as d,_b as V,a as I,aa as c,ab as q,ac as $,bb as D,cb as M,db as n,eb as r,ec as A,fb as v,ga as x,ib as O,jb as f,kb as _,mb as m,ob as F,pa as N,qa as k,ub as y}from"./chunk-UTOI2SA5.js";import{a as T}from"./chunk-FDERIQAA.js";function re(t,o){t&1&&(n(0,"div"),m(1,"Name is required."),r())}function ne(t,o){t&1&&(n(0,"div"),m(1,"Max 50 characters allowed."),r())}function le(t,o){if(t&1&&(n(0,"div",20),s(1,re,2,0,"div",21)(2,ne,2,0,"div",21),r()),t&2){let i,e,l=_();a(),d("ngIf",(i=l.editorialForm.get("name"))==null||i.errors==null?null:i.errors.required),a(),d("ngIf",(e=l.editorialForm.get("name"))==null||e.errors==null?null:e.errors.maxlength)}}function ae(t,o){t&1&&(n(0,"div"),m(1,"Phone number is required."),r())}function de(t,o){t&1&&(n(0,"div"),m(1,"Phone must be 7 to 15 digits."),r())}function me(t,o){if(t&1&&(n(0,"div",20),s(1,ae,2,0,"div",21)(2,de,2,0,"div",21),r()),t&2){let i,e,l=_();a(),d("ngIf",(i=l.editorialForm.get("phone"))==null||i.errors==null?null:i.errors.required),a(),d("ngIf",(e=l.editorialForm.get("phone"))==null||e.errors==null?null:e.errors.pattern)}}function se(t,o){t&1&&(n(0,"div"),m(1,"Website is required."),r())}function pe(t,o){t&1&&(n(0,"div"),m(1,"Enter a valid website URL."),r())}function ue(t,o){if(t&1&&(n(0,"div",20),s(1,se,2,0,"div",21)(2,pe,2,0,"div",21),r()),t&2){let i,e,l=_();a(),d("ngIf",(i=l.editorialForm.get("website"))==null||i.errors==null?null:i.errors.required),a(),d("ngIf",(e=l.editorialForm.get("website"))==null||e.errors==null?null:e.errors.pattern)}}function ce(t,o){t&1&&(n(0,"div"),m(1,"Email is required."),r())}function fe(t,o){t&1&&(n(0,"div"),m(1,"Invalid email format."),r())}function _e(t,o){if(t&1&&(n(0,"div",20),s(1,ce,2,0,"div",21)(2,fe,2,0,"div",21),r()),t&2){let i,e,l=_();a(),d("ngIf",(i=l.editorialForm.get("email"))==null||i.errors==null?null:i.errors.required),a(),d("ngIf",(e=l.editorialForm.get("email"))==null||e.errors==null?null:e.errors.email)}}function ve(t,o){if(t&1){let i=O();n(0,"div",22),f("click",function(){let l=N(i).$implicit,p=_();return k(p.selectState(l))}),m(1),r()}if(t&2){let i=o.$implicit;a(),F(" ",i," ")}}function ge(t,o){t&1&&(n(0,"div"),m(1,"State is required."),r())}function be(t,o){if(t&1&&(n(0,"div",20),s(1,ge,2,0,"div",21),r()),t&2){let i,e=_();a(),d("ngIf",(i=e.editorialForm.get("state"))==null||i.errors==null?null:i.errors.required)}}var g=class t{modalService=c(S);animationState="modal-animate-in";_fb=c(U);store=c(C);functionTyeEm="";editorial;toggleState=!1;stateOptions=["ACTIVE","INACTIVE"];editorialForm=this._fb.group({name:["",[u.required,u.maxLength(50)]],phone:["",[u.required,u.pattern(/^\d{7,15}$/)]],website:["",[u.required,u.pattern(/^(https?:\/\/)?[\w.-]+\.[a-z]{2,}$/i)]],email:["",[u.required,u.email]],state:["",[u.required]]});ngOnInit(){this.editorial&&(console.log("Editorial cargado: "),console.log(this.editorial),this.editorialForm.patchValue(T({},this.editorial)))}selectState(o){this.editorialForm.get("state")?.setValue(o),this.toggleState=!1}onSubmit(){if(this.editorialForm.valid)this.save(),this.close();else{this.editorialForm.markAllAsTouched();for(let[o,i]of Object.entries(this.editorialForm.controls))i.errors&&console.log(`Errores en ${o}:`,i.errors)}}save(){let o=e=>e==null||typeof e=="string"&&e.trim()===""?null:e,i={id:this.editorial?Number(this.editorial.id):0,name:o(this.editorialForm.get("name")?.value),phone:o(this.editorialForm.get("phone")?.value?String(this.editorialForm.get("phone")?.value):null),website:o(this.editorialForm.get("website")?.value),email:o(this.editorialForm.get("email")?.value),state:o(this.editorialForm.get("state")?.value)};this.editorial?this.store.dispatch(Y({editedItem:i})):this.store.dispatch(X({newItem:i}))}close(){this.animationState="modal-animate-out",setTimeout(()=>this.modalService.close(),150)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=x({type:t,selectors:[["app-form-editorial"]],inputs:{functionTyeEm:"functionTyeEm",editorial:"editorial"},standalone:!0,features:[y],decls:37,vars:10,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-60","z-40","flex","items-center","justify-center"],[1,"w-full","max-w-md","bg-white","rounded-xl","shadow-lg","mx-4","md:mx-0",3,"ngClass"],[1,"py-8","text-center","font-bold","text-2xl","text-gray-800"],[1,"px-8","pb-8","space-y-6",3,"ngSubmit","formGroup"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","text","id","name","formControlName","name","placeholder","Enter editorial name",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","shadow-sm","focus:ring-blue-500","focus:border-blue-500"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","number","id","phone","formControlName","phone","placeholder","Enter phone number",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","shadow-sm","focus:ring-blue-500","focus:border-blue-500","no-spinner"],["for","website",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","url","id","website","formControlName","website","placeholder","https://example.com",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","shadow-sm","focus:ring-blue-500","focus:border-blue-500"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","email","id","email","formControlName","email","placeholder","Enter email address",1,"w-full","border","border-gray-300","rounded-lg","px-3","py-2","shadow-sm","focus:ring-blue-500","focus:border-blue-500"],[1,"relative"],[1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","button",1,"w-full","border","border-gray-300","rounded","px-4","py-2","text-left","bg-white","shadow-sm","hover:bg-gray-50",3,"click"],[1,"float-right"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-300","rounded","shadow-md","max-h-60","overflow-y-auto",3,"ngClass"],[1,"px-4","py-2","hover:bg-gray-100","cursor-pointer"],[3,"closeModal","functionTyeRec"],[1,"text-red-500","text-sm","mt-1"],[4,"ngIf"],[1,"px-4","py-2","hover:bg-gray-100","cursor-pointer",3,"click"]],template:function(i,e){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),m(3,"EDITORIAL FORM"),r(),n(4,"form",3),f("ngSubmit",function(){return e.onSubmit()}),n(5,"div")(6,"label",4),m(7,"Name"),r(),v(8,"input",5),s(9,le,3,2,"div",6),r(),n(10,"div")(11,"label",7),m(12,"Phone"),r(),v(13,"input",8),s(14,me,3,2,"div",6),r(),n(15,"div")(16,"label",9),m(17,"Website"),r(),v(18,"input",10),s(19,ue,3,2,"div",6),r(),n(20,"div")(21,"label",11),m(22,"Email"),r(),v(23,"input",12),s(24,_e,3,2,"div",6),r(),n(25,"div",13)(26,"label",14),m(27,"State"),r(),n(28,"button",15),f("click",function(){return e.toggleState=!e.toggleState}),m(29),n(30,"span",16),m(31,"\u25BC"),r()(),n(32,"div",17),D(33,ve,2,1,"div",18,q),r(),s(35,be,2,1,"div",6),r(),n(36,"app-cancel-save-buttons",19),f("closeModal",function(){return e.close()}),r()()()()),i&2){let l,p,b,h,w,E;a(),d("ngClass",e.animationState),a(3),d("formGroup",e.editorialForm),a(5),d("ngIf",((l=e.editorialForm.get("name"))==null?null:l.touched)&&((l=e.editorialForm.get("name"))==null?null:l.invalid)),a(5),d("ngIf",((p=e.editorialForm.get("phone"))==null?null:p.touched)&&((p=e.editorialForm.get("phone"))==null?null:p.invalid)),a(5),d("ngIf",((b=e.editorialForm.get("website"))==null?null:b.touched)&&((b=e.editorialForm.get("website"))==null?null:b.invalid)),a(5),d("ngIf",((h=e.editorialForm.get("email"))==null?null:h.touched)&&((h=e.editorialForm.get("email"))==null?null:h.invalid)),a(5),F(" ",((w=e.editorialForm.get("state"))==null?null:w.value)||"Choose State"," "),a(3),d("ngClass",e.toggleState?"block":"hidden"),a(),M(e.stateOptions),a(2),d("ngIf",((E=e.editorialForm.get("state"))==null?null:E.touched)&&((E=e.editorialForm.get("state"))==null?null:E.invalid)),a(),d("functionTyeRec",e.functionTyeEm)}},dependencies:[A,V,$,J,H,B,R,G,j,z,L,W]})};var te=class t{store=c(C);modalService=c(S);notificationService=c(K);subscription=new I;editorials$=[];columns=[{field:"id",header:"Id"},{field:"name",header:"Name"},{field:"phone",header:"Phone"},{field:"website",header:"Website"},{field:"email",header:"Email"},{field:"state",header:"State"}];ngOnInit(){let o=!1,i=this.store.select(ee).subscribe(e=>{!o&&e.length===0&&(this.store.dispatch(Q()),o=!0),this.editorials$=e});this.subscription.add(i)}createEditorial(){console.log("Create editorial clicked"),this.modalService.open(g,{functionTyeEm:"create"})}editEditorial(o){console.log("Edit:",o),this.modalService.open(g,{functionTyeEm:"update",editorial:o})}deleteEditorial(o){this.notificationService.showConfirmationDelete("Customer",()=>{this.store.dispatch(Z({id:o.id}))}),console.log("Delete:",o)}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=x({type:t,selectors:[["app-editorials"]],standalone:!0,features:[y],decls:5,vars:2,consts:[[1,"px-6","h-full"],[1,"text-2xl","font-extrabold","text-gray-800","flex","items-center","gap-3"],[1,"table-books"],["type","no-view",3,"create","edit","delete","columns","data"]],template:function(i,e){i&1&&(n(0,"div",0)(1,"h1",1),m(2," Editorials "),r(),n(3,"div",2)(4,"app-crud-table",3),f("create",function(){return e.createEditorial()})("edit",function(p){return e.editEditorial(p)})("delete",function(p){return e.deleteEditorial(p)}),r()()()),i&2&&(a(4),d("columns",e.columns)("data",e.editorials$))},dependencies:[P]})};export{te as EditorialsComponent};
